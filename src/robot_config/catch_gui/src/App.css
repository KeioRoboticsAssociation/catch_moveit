.app-container {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  width: 100%;
  height: 100vh;
  display: flex;
  flex-direction: column;
  padding: min(max(0.5rem, 2vw), 1.5rem);
  gap: min(max(0.8rem, 2vh), 1.5rem);
  box-sizing: border-box;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  color: #333;
  overflow: hidden;
  transition: background-color 0.3s ease;
}

/* 赤色背景 */
.app-container[data-background="red"] {
  background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
}

/* 青色背景 */
.app-container[data-background="blue"] {
  background: linear-gradient(135deg, #4285f4 0%, #3367d6 100%);
}

.app-header {
  flex-shrink: 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: rgba(255, 255, 255, 0.9);
  padding: min(max(0.5rem, 1.5vw), 1rem) min(max(1rem, 3vw), 2rem);
  border-radius: min(max(8px, 2vw), 15px);
  box-shadow: 0 min(max(3px, 0.5vh), 8px) min(max(16px, 2vw), 32px) rgba(0, 0, 0, 0.1);
  backdrop-filter: blur(min(max(2px, 1vw), 10px));
  border: 1px solid rgba(255, 255, 255, 0.2);
  min-height: min(max(40px, 6vh), 60px);
}

.app-title {
  font-size: min(max(1.2rem, 3vw), 2rem);
  font-weight: 800;
  color: #2c3e50;
  text-shadow: min(max(1px, 0.1vw), 2px) min(max(1px, 0.1vw), 2px) min(max(2px, 0.2vw), 4px) rgba(0, 0, 0, 0.1);
  margin: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.status-text {
  font-weight: 600;
  color: #34495e;
  font-size: min(max(0.8rem, 2vw), 1.1rem);
  display: flex;
  align-items: center;
  gap: min(max(0.3rem, 1vw), 0.5rem);
}

.status-indicator {
  margin-left: min(max(0.5rem, 1vw), 0.75rem);
  padding: min(max(0.3rem, 0.5vh), 0.5rem) min(max(0.8rem, 2vw), 1.25rem);
  font-size: min(max(0.7rem, 1.5vw), 0.9rem);
  font-weight: 700;
  border-radius: min(max(15px, 3vw), 25px);
  box-shadow: 0 min(max(2px, 0.3vh), 4px) min(max(8px, 1vw), 15px) rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
  white-space: nowrap;
}

/* 接続状態のエフェクト */
.status-connected {
  background: linear-gradient(45deg, #27ae60, #2ecc71);
  color: white;
  animation: pulse 2s infinite;
  box-shadow: 0 0 15px rgba(46, 204, 113, 0.5);
}

@keyframes pulse {
  0% { 
    box-shadow: 0 0 0 0 rgba(46, 204, 113, 0.7);
    transform: scale(1);
  }
  50% { 
    box-shadow: 0 0 0 10px rgba(46, 204, 113, 0.3);
    transform: scale(1.02);
  }
  100% { 
    box-shadow: 0 0 0 20px rgba(46, 204, 113, 0);
    transform: scale(1);
  }
}

.status-error {
  background: linear-gradient(45deg, #c0392b, #e74c3c);
  color: white;
}

.status-disconnected {
  background: linear-gradient(45deg, #f39c12, #f1c40f);
  color: white;
}

/* 3行10列のPoseグリッド */
.pose-grid-container {
  flex: 1;
  min-height: 0;
  background: rgba(255, 255, 255, 0.85);
  padding: min(max(0.3rem, 1vw), 0.6rem);
  border-radius: min(max(5px, 1vw), 10px);
  box-shadow: 0 min(max(2px, 0.5vh), 6px) min(max(10px, 1.8vw), 20px) rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(min(max(2px, 0.5vw), 5px));
  border: 1px solid rgba(255, 255, 255, 0.3);
  overflow: hidden;
}

.pose-grid {
  display: grid;
  grid-template-rows: repeat(3, 1fr);
  grid-template-columns: repeat(10, 1fr);
  gap: min(max(0.3rem, 1vw), 1rem);
  height: 100%;
  width: 100%;
}

.grid-button {
  background: linear-gradient(145deg, #ffffff, #f0f0f0);
  border: min(max(1px, 0.1vh), 2px) solid #3498db;
  border-radius: min(max(3px, 0.8vw), 8px);
  font-size: min(max(0.5rem, 1.2vw), 0.8rem);
  font-weight: 700;
  color: #2980b9;
  box-shadow: 0 min(max(2px, 0.3vh), 5px) min(max(5px, 1.5vw), 15px) rgba(52, 152, 219, 0.3);
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: min(max(0.15rem, 0.3vh), 0.4rem) min(max(0.2rem, 0.8vw), 0.5rem);
  aspect-ratio: 0.9;
  min-width: 0;
  min-height: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.grid-button:hover {
  background: linear-gradient(145deg, #3498db, #2980b9);
  color: white;
  transform: translateY(min(max(-2px, -0.3vh), -3px));
  box-shadow: 0 min(max(4px, 0.6vh), 10px) min(max(12px, 2vw), 25px) rgba(52, 152, 219, 0.4);
}

.grid-button:active {
  transform: translateY(min(max(0.8px, 0.15vh), 1.5px));
  box-shadow: 0 min(max(1.5px, 0.25vh), 3.5px) min(max(4.5px, 0.8vw), 9px) rgba(52, 152, 219, 0.3);
}

.grid-button:disabled {
  background: linear-gradient(145deg, #bdc3c7, #95a5a6);
  border-color: #7f8c8d;
  color: #ecf0f1;
  cursor: not-allowed;
  transform: none;
  box-shadow: 0 min(max(1px, 0.15vh), 2.5px) min(max(3.5px, 0.6vw), 7px) rgba(0, 0, 0, 0.1);
}

.subscriber-area {
  flex-shrink: 0;
  background: rgba(255, 255, 255, 0.9);
  border: min(max(1px, 0.1vh), 2px) solid #9b59b6;
  border-radius: min(max(8px, 1.2vw), 15px);
  padding: min(max(0.5rem, 0.8vh), 1.2rem) min(max(0.6rem, 1.5vw), 1.2rem);
  text-align: center;
  box-shadow: 0 min(max(3px, 0.4vh), 8px) min(max(12px, 1.5vw), 32px) rgba(155, 89, 182, 0.2);
  backdrop-filter: blur(min(max(4px, 0.8vw), 10px));
  min-height: min(max(35px, 4vh), 50px);
}

.subscriber-label {
  font-weight: 700;
  color: #8e44ad;
  font-size: min(max(0.8rem, 1.8vw), 1.2rem);
  margin-right: min(max(0.2rem, 0.8vw), 1rem);
}

.subscriber-value {
  font-family: 'Courier New', monospace;
  font-size: min(max(0.9rem, 2.2vw), 1.3rem);
  font-weight: 800;
  color: #9b59b6;
  text-shadow: min(max(0.3px, 0.05vw), 1px) min(max(0.3px, 0.05vw), 1px) min(max(0.5px, 0.1vw), 2px) rgba(0, 0, 0, 0.1);
}

/* 中央コントロールエリア */
.middle-control-area {
  display: flex;
  justify-content: center;
  gap: min(max(0.8rem, 2.5vw), 3rem);
  padding: min(max(0.6rem, 1.2vh), 1.5rem) min(max(0.8rem, 1.5vw), 1.5rem);
  background: rgba(255, 255, 255, 0.8);
  border-radius: min(max(8px, 1.2vw), 20px);
  box-shadow: 0 min(max(4px, 0.8vh), 12px) min(max(15px, 2.5vw), 40px) rgba(0, 0, 0, 0.1);
  backdrop-filter: blur(min(max(4px, 0.8vw), 10px));
  border: 1px solid rgba(255, 255, 255, 0.3);
  min-height: min(max(70px, 8vh), 120px);
}

.arm-control-group {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: min(max(0.4rem, 0.8vh), 1rem);
}

.arm-control-title {
  font-size: min(max(0.9rem, 1.8vw), 1.3rem);
  font-weight: 800;
  margin: 0;
  color: #2c3e50;
  text-shadow: min(max(0.3px, 0.05vw), 1px) min(max(0.3px, 0.05vw), 1px) min(max(0.5px, 0.1vw), 2px) rgba(0, 0, 0, 0.1);
}

.up-down-buttons {
  display: flex;
  flex-direction: column;
  gap: min(max(0.4rem, 0.8vh), 1rem);
}

.up-down-button {
  width: min(max(50px, 6vw), 120px);
  height: min(max(25px, 3vh), 50px);
  background: linear-gradient(145deg, #ffffff, #f8f9fa);
  border: min(max(1.5px, 0.2vh), 3px) solid #95a5a6;
  border-radius: min(max(6px, 1vw), 12px);
  font-size: min(max(0.6rem, 1vw), 0.9rem);
  font-weight: 700;
  box-shadow: 0 min(max(2px, 0.3vh), 6px) min(max(8px, 1.2vw), 20px) rgba(149, 165, 166, 0.3);
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  display: flex;
  align-items: center;
  justify-content: center;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding: min(max(0.2rem, 0.3vh), 0.5rem) min(max(0.3rem, 0.5vw), 0.8rem);
}

.up-down-button:hover {
  transform: translateY(min(max(-2px, -0.3vh), -3px));
  box-shadow: 0 min(max(4px, 0.6vh), 10px) min(max(12px, 1.8vw), 25px) rgba(149, 165, 166, 0.4);
}

.up-down-button:active {
  transform: translateY(min(max(0.5px, 0.1vh), 1px));
  box-shadow: 0 min(max(1px, 0.2vh), 4px) min(max(5px, 0.8vw), 15px) rgba(149, 165, 166, 0.3);
}

.up-down-button:disabled {
  background: linear-gradient(145deg, #bdc3c7, #95a5a6);
  cursor: not-allowed;
  transform: none;
  box-shadow: 0 min(max(1px, 0.1vh), 2px) min(max(3px, 0.5vw), 10px) rgba(0, 0, 0, 0.1);
}

/* 下部コントロールエリア */
.bottom-control-area {
  display: flex;
  justify-content: space-around;
  gap: min(max(0.8rem, 1.5vw), 2rem);
  padding: min(max(0.6rem, 1.2vh), 1.5rem) min(max(0.8rem, 1.5vw), 1.5rem);
  background: rgba(255, 255, 255, 0.85);
  border-radius: min(max(8px, 1.2vw), 20px);
  box-shadow: 0 min(max(4px, 0.8vh), 12px) min(max(15px, 2.5vw), 40px) rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(min(max(4px, 0.8vw), 10px));
  border: 1px solid rgba(255, 255, 255, 0.3);
  min-height: min(max(70px, 8vh), 100px);
}

.arm-controls {
  display: flex;
  align-items: center;
  gap: min(max(0.6rem, 1.5vw), 1.5rem);
}

.arm-button {
  background: linear-gradient(145deg, #ffffff, #f8f9fa);
  border: min(max(1.5px, 0.2vh), 3px) solid #34495e;
  border-radius: min(max(12px, 1.5vw), 25px);
  font-size: min(max(0.7rem, 1.2vw), 1.1rem);
  font-weight: 700;
  box-shadow: 0 min(max(3px, 0.5vh), 8px) min(max(12px, 1.8vw), 25px) rgba(52, 73, 94, 0.3);
  padding: min(max(0.5rem, 0.8vh), 1rem) min(max(0.8rem, 1.5vw), 1.5rem);
  height: min(max(45px, 6vh), 80px);
  min-width: min(max(70px, 8vw), 150px);
  cursor: pointer;
  text-align: center;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  display: flex;
  align-items: center;
  justify-content: center;
}

.arm-button:hover {
  transform: translateY(min(max(-3px, -0.5vh), -5px));
  box-shadow: 0 min(max(5px, 0.8vh), 12px) min(max(16px, 2.2vw), 30px) rgba(52, 73, 94, 0.4);
}

.arm-button:active {
  transform: translateY(min(max(1px, 0.2vh), 2px));
  box-shadow: 0 min(max(2px, 0.3vh), 6px) min(max(8px, 1.2vw), 20px) rgba(52, 73, 94, 0.3);
}

.arm-button:disabled {
  background: linear-gradient(145deg, #bdc3c7, #95a5a6);
  border-color: #7f8c8d;
  cursor: not-allowed;
  transform: none;
  box-shadow: 0 min(max(1px, 0.1vh), 4px) min(max(5px, 0.8vw), 15px) rgba(0, 0, 0, 0.1);
}

/* 掴むボタンのホバー効果 */
.grab-button:hover {
  background: linear-gradient(145deg, #f39c12, #d68910);
  box-shadow: 0 min(max(6px, 1vh), 12px) min(max(20px, 3vw), 30px) rgba(241, 196, 15, 0.4);
  transform: translateY(min(max(-3px, -0.5vh), -5px)) scale(1.02);
}

/* トグルボタン */
.header-controls {
  display: flex;
  align-items: center;
  gap: min(max(0.6rem, 1.2vw), 1.5rem);
}

.toggle-button {
  background: linear-gradient(145deg, #9b59b6, #8e44ad);
  border: min(max(1px, 0.1vh), 2px) solid #8e44ad;
  border-radius: min(max(5px, 0.8vw), 10px);
  font-size: min(max(0.7rem, 1.2vw), 1rem);
  font-weight: 700;
  padding: min(max(0.3rem, 0.6vh), 0.75rem) min(max(0.6rem, 1.2vw), 1.5rem);
  color: white;
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 min(max(2px, 0.3vh), 6px) min(max(8px, 1.2vw), 20px) rgba(155, 89, 182, 0.3);
  white-space: nowrap;
}

.toggle-button:hover {
  background: linear-gradient(145deg, #8e44ad, #703688);
  transform: translateY(min(max(-1px, -0.1vh), -2px));
  box-shadow: 0 min(max(4px, 0.6vh), 10px) min(max(12px, 1.8vw), 25px) rgba(155, 89, 182, 0.4);
}

.toggle-button:active {
  transform: translateY(min(max(0.5px, 0.1vh), 1px));
  box-shadow: 0 min(max(1px, 0.2vh), 4px) min(max(5px, 0.8vw), 15px) rgba(155, 89, 182, 0.3);
}

/* レスポンシブ対応 - タブレット */
@media (max-width: 1024px) {
  .app-container {
    padding: min(max(0.3rem, 1.2vw), 0.8rem);
    gap: min(max(0.5rem, 1.2vh), 0.8rem);
  }
  
  .app-header {
    padding: min(max(0.3rem, 0.8vw), 0.6rem) min(max(0.6rem, 1.5vw), 1rem);
  }
  
  .pose-grid-container {
    padding: min(max(0.3rem, 1vw), 0.6rem);
  }
  
  .pose-grid {
    gap: min(max(0.2rem, 0.6vw), 0.6rem);
  }
  
  .grid-button {
    font-size: min(max(0.35rem, 1vw), 0.6rem);
    padding: min(max(0.08rem, 0.2vh), 0.25rem) min(max(0.12rem, 0.5vw), 0.3rem);
    border-radius: min(max(2.5px, 0.6vw), 6px);
  }
  
  .middle-control-area {
    gap: min(max(0.6rem, 1.8vw), 1.5rem);
    padding: min(max(0.4rem, 0.8vh), 0.8rem);
  }
  
  .bottom-control-area {
    gap: min(max(0.5rem, 1vw), 1rem);
    padding: min(max(0.4rem, 0.8vh), 0.8rem);
  }
  
  .arm-controls {
    gap: min(max(0.4rem, 1vw), 0.8rem);
  }
  
  .arm-button {
    min-width: min(max(60px, 6vw), 100px);
    height: min(max(40px, 5vh), 60px);
    font-size: min(max(0.6rem, 1vw), 0.9rem);
    padding: min(max(0.3rem, 0.5vh), 0.6rem) min(max(0.5rem, 1vw), 1rem);
  }
  
  .up-down-button {
    width: min(max(45px, 5vw), 80px);
    height: min(max(22px, 2.5vh), 35px);
    font-size: min(max(0.5rem, 0.9vw), 0.7rem);
    padding: min(max(0.1rem, 0.2vh), 0.3rem) min(max(0.2rem, 0.4vw), 0.5rem);
  }
}

/* レスポンシブ対応 - モバイル */
@media (max-width: 768px) {
  .app-container {
    padding: min(max(0.2rem, 1vw), 0.5rem);
    gap: min(max(0.3rem, 0.8vh), 0.6rem);
  }
  
  .app-header {
    flex-direction: column;
    gap: min(max(0.2rem, 0.3vh), 0.3rem);
    padding: min(max(0.2rem, 0.6vw), 0.4rem);
    min-height: auto;
  }
  
  .header-controls {
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: center;
    gap: min(max(0.2rem, 0.6vw), 0.3rem);
  }
  
  .app-title {
    font-size: min(max(0.9rem, 3vw), 1.3rem);
    text-align: center;
  }
  
  .pose-grid-container {
    padding: min(max(0.25rem, 0.8vw), 0.5rem);
  }
  
  .pose-grid {
    grid-template-rows: repeat(6, 1fr);
    grid-template-columns: repeat(5, 1fr);
    gap: min(max(0.15rem, 0.4vw), 0.4rem);
  }
  
  .grid-button {
    font-size: min(max(0.3rem, 1.2vw), 0.5rem);
    padding: min(max(0.06rem, 0.15vh), 0.2rem) min(max(0.1rem, 0.4vw), 0.25rem);
    border-radius: min(max(2px, 0.5vw), 5px);
  }
  
  .middle-control-area {
    flex-direction: row;
    flex-wrap: wrap;
    gap: min(max(0.4rem, 1.5vw), 0.8rem);
    padding: min(max(0.2rem, 0.5vh), 0.5rem);
    min-height: auto;
  }
  
  .arm-control-group {
    gap: min(max(0.2rem, 0.3vh), 0.3rem);
  }
  
  .arm-control-title {
    font-size: min(max(0.7rem, 2vw), 0.9rem);
  }
  
  .up-down-buttons {
    gap: min(max(0.2rem, 0.3vh), 0.3rem);
  }
  
  .up-down-button {
    width: min(max(35px, 8vw), 60px);
    height: min(max(18px, 3vh), 30px);
    font-size: min(max(0.4rem, 1.2vw), 0.5rem);
    border-radius: min(max(4px, 0.8vw), 8px);
    padding: min(max(0.1rem, 0.1vh), 0.2rem) min(max(0.1rem, 0.3vw), 0.3rem);
  }
  
  .bottom-control-area {
    flex-direction: column;
    gap: min(max(0.2rem, 0.6vh), 0.4rem);
    padding: min(max(0.2rem, 0.5vh), 0.4rem);
    min-height: auto;
  }
  
  .arm-controls {
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: center;
    gap: min(max(0.2rem, 0.6vw), 0.3rem);
  }
  
  .arm-button {
    min-width: min(max(45px, 10vw), 80px);
    height: min(max(30px, 5vh), 50px);
    font-size: min(max(0.5rem, 1.5vw), 0.6rem);
    padding: min(max(0.2rem, 0.3vh), 0.3rem) min(max(0.3rem, 0.8vw), 0.6rem);
    border-radius: min(max(10px, 1.2vw), 15px);
  }
  
  .subscriber-area {
    padding: min(max(0.2rem, 0.5vh), 0.4rem);
  }
  
  .subscriber-label {
    font-size: min(max(0.6rem, 1.8vw), 0.8rem);
    margin-right: min(max(0.1rem, 0.3vw), 0.2rem);
  }
  
  .subscriber-value {
    font-size: min(max(0.7rem, 2vw), 0.9rem);
  }
  
  .toggle-button {
    font-size: min(max(0.5rem, 1.8vw), 0.7rem);
    padding: min(max(0.1rem, 0.3vh), 0.3rem) min(max(0.4rem, 1vw), 0.8rem);
  }
}

/* レスポンシブ対応 - 小さいモバイル */
@media (max-width: 480px) {
  .app-container {
    padding: min(max(0.1rem, 0.8vw), 0.3rem);
    gap: min(max(0.2rem, 0.5vh), 0.3rem);
  }
  
  .app-header {
    padding: min(max(0.1rem, 0.5vw), 0.2rem);
  }
  
  .app-title {
    font-size: min(max(0.7rem, 4vw), 1rem);
  }
  
  .status-text {
    font-size: min(max(0.5rem, 2.5vw), 0.7rem);
  }
  
  .status-indicator {
    padding: min(max(0.1rem, 0.2vh), 0.2rem) min(max(0.4rem, 1.2vw), 0.6rem);
    font-size: min(max(0.4rem, 2vw), 0.6rem);
  }
  
  .pose-grid-container {
    padding: min(max(0.2rem, 0.6vw), 0.3rem);
  }
  
  .pose-grid {
    gap: min(max(0.1rem, 0.3vw), 0.2rem);
  }
  
  .grid-button {
    font-size: min(max(0.25rem, 1.3vw), 0.4rem);
    padding: min(max(0.04rem, 0.1vh), 0.15rem) min(max(0.08rem, 0.3vw), 0.2rem);
    border-radius: min(max(1.5px, 0.4vw), 4px);
  }
  
  .middle-control-area {
    padding: min(max(0.1rem, 0.3vh), 0.2rem);
    gap: min(max(0.3rem, 1vw), 0.5rem);
  }
  
  .bottom-control-area {
    padding: min(max(0.1rem, 0.3vh), 0.2rem);
    gap: min(max(0.1rem, 0.4vh), 0.2rem);
  }
  
  .arm-button {
    min-width: min(max(35px, 12vw), 65px);
    height: min(max(25px, 6vh), 40px);
    font-size: min(max(0.4rem, 1.8vw), 0.5rem);
    padding: min(max(0.1rem, 0.2vh), 0.2rem) min(max(0.2rem, 0.6vw), 0.4rem);
  }
  
  .up-down-button {
    width: min(max(25px, 10vw), 45px);
    height: min(max(15px, 4vh), 25px);
    font-size: min(max(0.3rem, 1.5vw), 0.4rem);
    padding: min(max(0.05rem, 0.1vh), 0.1rem) min(max(0.1rem, 0.2vw), 0.2rem);
  }
  
  .toggle-button {
    font-size: min(max(0.4rem, 2vw), 0.5rem);
    padding: min(max(0.05rem, 0.2vh), 0.1rem) min(max(0.2rem, 0.8vw), 0.5rem);
  }
  
  .subscriber-label {
    font-size: min(max(0.5rem, 2vw), 0.6rem);
  }
  
  .subscriber-value {
    font-size: min(max(0.6rem, 2.2vw), 0.7rem);
  }
}